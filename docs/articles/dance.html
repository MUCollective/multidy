<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recreating `Adding inferential treatments to plots using Resampling and Animations` using multidy • multiverse</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Recreating `Adding inferential treatments to plots using Resampling and Animations` using multidy">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">multiverse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Conditions.html">Declaring conditions in the multiverse</a>
    </li>
    <li>
      <a href="../articles/branch.html">A discussion on branches in the multiverse</a>
    </li>
    <li>
      <a href="../articles/calculate-mean-multiverse.html">The most basic multiverse example: calculating the mean</a>
    </li>
    <li>
      <a href="../articles/complete-multiverse-analysis.html">A complete implementation of a multiverse analysis</a>
    </li>
    <li>
      <a href="../articles/dance.html">Recreating `Adding inferential treatments to plots using Resampling and Animations` using multidy</a>
    </li>
    <li>
      <a href="../articles/frequentist-multiverse-analysis.html">A multiverse analysis of the efficiency of physical visualizations</a>
    </li>
    <li>
      <a href="../articles/visualizing-multiverse.html">Extracting and Visualizing the results of a multiverse analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Recreating <code>Adding inferential treatments to plots using Resampling and Animations</code> using multidy</h1>
                        <h4 class="author">Abhraneel Sarma</h4>
            
            <h4 class="date">2020-02-04</h4>
      
      
      <div class="hidden name"><code>dance.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>In this document, we recreate the mini-paper <a href="https://explorablemultiverse.github.io/examples/dance/">Adding Inferential Information to plots using Resampling and Animations</a> using the <strong>multidy</strong> package.</p>
<p>The mini-paper presents a method for adding inferential information to arbitrary statistical plots based on resampling and animation. A large number of bootstrap datasets are created and subjected to the same analyses and plotting procedures than the original dataset. These “bootstrap plots” are then animated to reveal the statistical noise that was hidden in the original plot, in order to help readers appreciate the uncertainty in the quantities, trends and patterns conveyed by the plot. The data used in this example is from a real study taken from the information visualization literature.</p>
</div>
<div id="the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#the-data" class="anchor"></a>The data</h2>
<p>The data presented here was collected by Harrison et al. <a href="https://doi.org/10.1109/TVCG.2014.2346979"></a>. The goal of their study was to rank nine existing visualizations in their ability to effectively convey correlations. We focus on experiment 2, which was the main experiment and for which data and analysis code are available. In that experiment, nine visualizations were evaluated on 1,600+ crowdsourcing workers on their ability to convey correlation. The staircase method was used to derive just-noticeable difference (JND) values, which capture discrimination capacity: the lower the value, the better the participant can discriminate between correlations.</p>
<p>The experiment involved four independent variables: the visualization type (9 levels), the base correlation value (6 levels), whether the correlation was positive or negative (2 levels), and whether the value was approached from above or from below (2 levels). Each participant carried out 4 tasks, each with a specific combination of conditions.</p>
<p>First, we will quickly show what the original data, and the plots created using this dataset, looks like:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"vis_correlation"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">df &lt;-<span class="st"> </span>vis_correlation <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>( vis, rbase, approach, sign ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(condition, visandsign, participant)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="st">  </span><span class="kw">summarise</span>( <span class="dt">jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(jnd) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>( </a>
<a class="sourceLine" id="cb1-8" data-line-number="8">    <span class="dt">median =</span> <span class="kw">map_dbl</span>(jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/median.html">median</a></span>(.x)),</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">    <span class="dt">mads =</span> <span class="kw">map_dbl</span>(jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/mad.html">mad</a></span>(.x, <span class="dt">constant =</span> <span class="dv">1</span>)),</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    <span class="dt">jnd_limit =</span> <span class="dv">3</span> <span class="op">*</span><span class="st"> </span>mads</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="st">  </span><span class="kw">ungroup</span>()</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">df.error_bar &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw">unnest</span>( <span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(jnd) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>( <span class="kw"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span>(jnd <span class="op">-</span><span class="st"> </span>median) <span class="op">&lt;=</span><span class="st"> </span>jnd_limit ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>( vis, rbase, approach, sign ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw">summarise</span>( <span class="dt">jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(jnd) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="dt">sd =</span> <span class="kw">map_dbl</span>(jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span>(.x)<span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(.x))),</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="dt">mean =</span> <span class="kw">map_dbl</span>(jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(.x))</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">  )</a></code></pre></div>
<div id="just-noticeable-differences-jnds" class="section level3">
<h3 class="hasAnchor">
<a href="#just-noticeable-differences-jnds" class="anchor"></a>Just Noticeable Differences (JNDs)</h3>
<p>The following figure shows the mean JND for each of the 216 conditions, each displayed as a dot. We show JND as a function of correlation <em>r</em> for both above (light points) and below (dark points) approaches.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">df.error_bar <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_errorbar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> rbase, <span class="dt">ymin =</span> (mean <span class="op">-</span><span class="st"> </span>sd), <span class="dt">ymax =</span> mean <span class="op">+</span><span class="st"> </span>sd, <span class="dt">color =</span> approach), <span class="dt">width =</span> <span class="fl">0.025</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_point</span>( <span class="kw">aes</span>(<span class="dt">x =</span> rbase, <span class="dt">y =</span> mean, <span class="dt">color =</span> approach )) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_hline</span>( <span class="dt">yintercept =</span> <span class="fl">0.45</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>, <span class="dt">alpha =</span> <span class="fl">0.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_abline</span>( <span class="dt">slope =</span> <span class="dv">-1</span>, <span class="dt">intercept =</span> <span class="dv">1</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>, <span class="dt">alpha =</span> <span class="fl">0.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="st">  </span><span class="kw">facet_wrap</span>(vis <span class="op">~</span><span class="st"> </span>sign, <span class="dt">ncol =</span> <span class="dv">4</span>)</a></code></pre></div>
<p><img src="dance_files/figure-html/unnamed-chunk-1-1.png" width="768"></p>
</div>
<div id="regression-results" class="section level3">
<h3 class="hasAnchor">
<a href="#regression-results" class="anchor"></a>Regression results</h3>
<p>The next figure shows the regression lines for all conditions, as well as the results from a <a href="https://doi.org/10.1111/j.1467-8659.2009.01694.x">previous similar experiment</a>. The figure is consistent with the paper’s main findings: ”using scatterplots to depict correlation results in better performance overall. However, this performance difference only occurs when depicting positively correlated data. In fact, parallel coordinates depicting negatively correlated data appear to perform as well as scatterplots”</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">filter_outliers &lt;-<span class="st"> </span><span class="cf">function</span>(x, median, limit) {</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>( x[<span class="kw"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span>(x <span class="op">-</span><span class="st"> </span>median) <span class="op">&lt;=</span><span class="st"> </span>limit] )</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">df.corr &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="st">  </span><span class="co"># the following visualizations were excluded from the analysis</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>( <span class="op">!</span>((vis <span class="op">==</span><span class="st"> "donut"</span> <span class="op">|</span><span class="st"> </span>vis <span class="op">==</span><span class="st"> "stackedarea"</span> <span class="op">|</span><span class="st"> </span>vis <span class="op">==</span><span class="st"> "stackedline"</span> <span class="op">|</span><span class="st"> </span>vis <span class="op">==</span><span class="st"> "stackedbar"</span>) <span class="op">&amp;</span><span class="st"> </span>(sign <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>((vis <span class="op">==</span><span class="st"> "radar"</span> <span class="op">|</span><span class="st"> </span>vis <span class="op">==</span><span class="st"> "line"</span>) <span class="op">&amp;</span><span class="st"> </span>(sign <span class="op">==</span><span class="st"> </span><span class="dv">-1</span>)) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="st">  </span><span class="kw">mutate</span>( <span class="dt">jnd =</span> <span class="kw">pmap</span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(jnd, median, jnd_limit), filter_outliers) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="st">  </span><span class="kw">mutate</span>( </a>
<a class="sourceLine" id="cb4-10" data-line-number="10">    <span class="dt">mean_jnd =</span> <span class="kw">map_dbl</span>(jnd, mean),</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">    <span class="dt">n =</span> <span class="kw">map_dbl</span>(jnd, length)</a>
<a class="sourceLine" id="cb4-12" data-line-number="12">  )</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">rbase_adj_coef &lt;-<span class="st"> </span>df.corr <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>( vis, sign, rbase ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>( <span class="dt">jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(jnd), <span class="dt">mean_jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(mean_jnd), <span class="dt">n =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(n), <span class="dt">approach =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(approach) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>( <span class="dt">rbase_adj_coef =</span> <span class="kw">map2_dbl</span>(mean_jnd, n, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(.x <span class="op">*</span><span class="st"> </span>.y) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(.y)) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>( <span class="dt">rbase_adj_coef =</span> <span class="kw">map2_dbl</span>(mean_jnd, n, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(.x <span class="op">*</span><span class="st"> </span>.y) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(.y)) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw">unnest</span>(<span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(jnd, mean_jnd, approach) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="st">  </span>magrittr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/magrittr/man/aliases.html">extract2</a></span>(<span class="st">"rbase_adj_coef"</span>)</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">df.corr_fitted &lt;-<span class="st"> </span>df.corr <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/tibble/man/add_column.html">add_column</a></span>( <span class="dt">rbase_adj_coef =</span> rbase_adj_coef ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="st">  </span><span class="kw">mutate</span>( </a>
<a class="sourceLine" id="cb5-12" data-line-number="12">    <span class="dt">multiplier =</span> <span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(approach <span class="op">==</span><span class="st"> "above"</span>, <span class="dv">1</span>, <span class="dv">-1</span>),</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">    <span class="dt">rbase =</span> rbase <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">*</span><span class="st"> </span>multiplier <span class="op">*</span><span class="st"> </span>rbase_adj_coef</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="st">  </span><span class="kw">group_by</span>( vis, sign ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="st">  </span><span class="kw">summarise</span>( <span class="dt">mean_jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(mean_jnd), <span class="dt">rbase =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(rbase) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="st">  </span><span class="kw">mutate</span>( </a>
<a class="sourceLine" id="cb5-18" data-line-number="18">    <span class="dt">fit =</span> <span class="kw">map2</span>(rbase, mean_jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">as.list</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/coef.html">coef</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(.y <span class="op">~</span><span class="st"> </span>.x)))),</a>
<a class="sourceLine" id="cb5-19" data-line-number="19">    <span class="dt">sign =</span> <span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(sign <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">"positive"</span>, <span class="st">"negative"</span>), <span class="dt">levels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"positive"</span>, <span class="st">"negative"</span>))</a>
<a class="sourceLine" id="cb5-20" data-line-number="20">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="st">  </span><span class="kw">unnest_wider</span>( <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(fit) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="st">  </span><span class="kw">rename</span>( <span class="dt">intercept =</span> <span class="st">`</span><span class="dt">(Intercept)</span><span class="st">`</span>, <span class="dt">coef =</span> .x ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb5-24" data-line-number="24">    <span class="dt">x =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb5-25" data-line-number="25">    <span class="dt">xend =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb5-26" data-line-number="26">    <span class="dt">y =</span> intercept <span class="op">+</span><span class="st"> </span>coef <span class="op">*</span><span class="st"> </span>x,</a>
<a class="sourceLine" id="cb5-27" data-line-number="27">    <span class="dt">yend =</span> intercept <span class="op">+</span><span class="st"> </span>coef <span class="op">*</span><span class="st"> </span>xend</a>
<a class="sourceLine" id="cb5-28" data-line-number="28">  )</a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">df.corr_fitted <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_segment</span>( <span class="kw">aes</span>( <span class="dt">x=</span>x, <span class="dt">y=</span>y, <span class="dt">xend=</span>xend, <span class="dt">yend=</span>yend, <span class="dt">color =</span> vis, <span class="dt">linetype =</span> sign) ) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">  </span><span class="kw">coord_cartesian</span>( <span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="fl">0.6</span>) ) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_y_continuous</span>( <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">by =</span> <span class="fl">0.1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="st">  </span><span class="kw">scale_x_continuous</span>( <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">by =</span> <span class="fl">0.2</span>))</a></code></pre></div>
<p><img src="dance_files/figure-html/regression-vis-1.png" width="768"></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">#data_original &lt;- read.csv("master-alt.csv")</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">n =<span class="st"> </span><span class="dv">200</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">M =<span class="st"> </span><span class="kw"><a href="../reference/multiverse.html">multiverse</a></span>()</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="kw"><a href="../reference/inside.html">inside</a></span>(M, {</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">  <span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="kw"><a href="../reference/branch.html">branch</a></span>(seed, <span class="dt">.options =</span> <span class="dv">1</span><span class="op">:</span>n))</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb7-9" data-line-number="9">  data.i =<span class="st"> </span>vis_correlation <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="st">    </span><span class="kw">group_by</span>(rbase, sign, vis, approach) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="st">    </span><span class="kw">summarise</span>( <span class="dt">jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(jnd) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="st">    </span><span class="kw">mutate</span>( </a>
<a class="sourceLine" id="cb7-13" data-line-number="13">      <span class="dt">sample_size =</span> <span class="kw">map_dbl</span>(jnd, length ),</a>
<a class="sourceLine" id="cb7-14" data-line-number="14">      <span class="dt">bootstrap_samples =</span> <span class="kw">map</span>(jnd, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>( .x, <span class="dt">size =</span> sample_size, <span class="dt">replace =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb7-15" data-line-number="15">    ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>jnd) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="st">    </span><span class="kw">unnest</span>( <span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(bootstrap_samples)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="st">    </span><span class="kw">rename</span>( <span class="dt">jnd =</span> bootstrap_samples )</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">  </a>
<a class="sourceLine" id="cb7-20" data-line-number="20">  df.i &lt;-<span class="st"> </span>data.i <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="st">    </span><span class="kw">group_by</span>( vis, rbase, approach, sign ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="st">    </span><span class="kw">summarise</span>( <span class="dt">jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(jnd) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="st">    </span><span class="kw">mutate</span>( </a>
<a class="sourceLine" id="cb7-24" data-line-number="24">      <span class="dt">median =</span> <span class="kw">map_dbl</span>(jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/median.html">median</a></span>(.x)),</a>
<a class="sourceLine" id="cb7-25" data-line-number="25">      <span class="dt">mads =</span> <span class="kw">map_dbl</span>(jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/mad.html">mad</a></span>(.x, <span class="dt">constant =</span> <span class="dv">1</span>)),</a>
<a class="sourceLine" id="cb7-26" data-line-number="26">      <span class="dt">jnd_limit =</span> <span class="dv">3</span> <span class="op">*</span><span class="st"> </span>mads</a>
<a class="sourceLine" id="cb7-27" data-line-number="27">    ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="st">    </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb7-29" data-line-number="29">})</a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/inside.html">inside</a></span>(M, {</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  df.error_bar.i &lt;-<span class="st"> </span>df.i <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">    </span><span class="kw">unnest</span>( <span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(jnd) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>( <span class="kw"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span>(jnd <span class="op">-</span><span class="st"> </span>median) <span class="op">&lt;=</span><span class="st"> </span>jnd_limit ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="st">    </span><span class="kw">group_by</span>( vis, rbase, approach, sign ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="st">    </span><span class="kw">summarise</span>( <span class="dt">jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(jnd) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">      <span class="dt">sd =</span> <span class="kw">map_dbl</span>(jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span>(.x)<span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(.x))),</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">      <span class="dt">mean =</span> <span class="kw">map_dbl</span>(jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(.x))</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">    )</a>
<a class="sourceLine" id="cb8-11" data-line-number="11">  </a>
<a class="sourceLine" id="cb8-12" data-line-number="12">  df.corr.i &lt;-<span class="st"> </span>df.i <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="st">      </span><span class="co"># the following visualizations were excluded from the analysis</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="st">      </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>( <span class="op">!</span>((vis <span class="op">==</span><span class="st"> "donut"</span> <span class="op">|</span><span class="st"> </span>vis <span class="op">==</span><span class="st"> "stackedarea"</span> <span class="op">|</span><span class="st"> </span>vis <span class="op">==</span><span class="st"> "stackedline"</span> <span class="op">|</span><span class="st"> </span>vis <span class="op">==</span><span class="st"> "stackedbar"</span>) <span class="op">&amp;</span><span class="st"> </span>(sign <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>((vis <span class="op">==</span><span class="st"> "radar"</span> <span class="op">|</span><span class="st"> </span>vis <span class="op">==</span><span class="st"> "line"</span>) <span class="op">&amp;</span><span class="st"> </span>(sign <span class="op">==</span><span class="st"> </span><span class="dv">-1</span>)) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="st">      </span><span class="kw">mutate</span>( <span class="dt">jnd =</span> <span class="kw">pmap</span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(jnd, median, jnd_limit), filter_outliers) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="st">      </span><span class="kw">mutate</span>( </a>
<a class="sourceLine" id="cb8-17" data-line-number="17">        <span class="dt">mean_jnd =</span> <span class="kw">map_dbl</span>(jnd, mean),</a>
<a class="sourceLine" id="cb8-18" data-line-number="18">        <span class="dt">n =</span> <span class="kw">map_dbl</span>(jnd, length)</a>
<a class="sourceLine" id="cb8-19" data-line-number="19">      )</a>
<a class="sourceLine" id="cb8-20" data-line-number="20">  </a>
<a class="sourceLine" id="cb8-21" data-line-number="21">  rbase_adj_coef.i &lt;-<span class="st"> </span>df.corr.i <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="st">      </span><span class="kw">group_by</span>( vis, sign, rbase ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="st">      </span><span class="kw">summarise</span>( <span class="dt">jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(jnd), <span class="dt">mean_jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(mean_jnd), <span class="dt">n =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(n), <span class="dt">approach =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(approach) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="st">      </span><span class="kw">mutate</span>( <span class="dt">rbase_adj_coef =</span> <span class="kw">map2_dbl</span>(mean_jnd, n, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(.x <span class="op">*</span><span class="st"> </span>.y) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(.y)) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="st">      </span><span class="kw">mutate</span>( <span class="dt">rbase_adj_coef =</span> <span class="kw">map2_dbl</span>(mean_jnd, n, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(.x <span class="op">*</span><span class="st"> </span>.y) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(.y)) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-26" data-line-number="26"><span class="st">      </span><span class="kw">unnest</span>(<span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(jnd, mean_jnd, approach) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27"><span class="st">      </span>magrittr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/magrittr/man/aliases.html">extract2</a></span>(<span class="st">"rbase_adj_coef"</span>)</a>
<a class="sourceLine" id="cb8-28" data-line-number="28">  </a>
<a class="sourceLine" id="cb8-29" data-line-number="29">  df.corr_fitted.i &lt;-<span class="st"> </span>df.corr.i <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-30" data-line-number="30"><span class="st">      </span>tibble<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/tibble/man/add_column.html">add_column</a></span>( <span class="dt">rbase_adj_coef =</span> rbase_adj_coef ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-31" data-line-number="31"><span class="st">      </span><span class="kw">mutate</span>( </a>
<a class="sourceLine" id="cb8-32" data-line-number="32">          <span class="dt">multiplier =</span> <span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(approach <span class="op">==</span><span class="st"> "above"</span>, <span class="dv">1</span>, <span class="dv">-1</span>),</a>
<a class="sourceLine" id="cb8-33" data-line-number="33">          <span class="dt">rbase =</span> rbase <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">*</span><span class="st"> </span>multiplier <span class="op">*</span><span class="st"> </span>rbase_adj_coef</a>
<a class="sourceLine" id="cb8-34" data-line-number="34">      ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-35" data-line-number="35"><span class="st">      </span><span class="kw">group_by</span>( vis, sign ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-36" data-line-number="36"><span class="st">      </span><span class="kw">summarise</span>( <span class="dt">mean_jnd =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(mean_jnd), <span class="dt">rbase =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(rbase) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-37" data-line-number="37"><span class="st">      </span><span class="kw">mutate</span>( </a>
<a class="sourceLine" id="cb8-38" data-line-number="38">          <span class="dt">fit =</span> <span class="kw">map2</span>(rbase, mean_jnd, <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/base/list.html">as.list</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/coef.html">coef</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(.y <span class="op">~</span><span class="st"> </span>.x)))),</a>
<a class="sourceLine" id="cb8-39" data-line-number="39">          <span class="dt">sign =</span> <span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(sign <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">"positive"</span>, <span class="st">"negative"</span>), <span class="dt">levels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"positive"</span>, <span class="st">"negative"</span>))</a>
<a class="sourceLine" id="cb8-40" data-line-number="40">      ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-41" data-line-number="41"><span class="st">      </span><span class="kw">unnest_wider</span>( <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(fit) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-42" data-line-number="42"><span class="st">      </span><span class="kw">rename</span>( <span class="dt">intercept =</span> <span class="st">`</span><span class="dt">(Intercept)</span><span class="st">`</span>, <span class="dt">coef =</span> .x ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-43" data-line-number="43"><span class="st">      </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb8-44" data-line-number="44">          <span class="dt">x =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb8-45" data-line-number="45">          <span class="dt">xend =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb8-46" data-line-number="46">          <span class="dt">y =</span> intercept <span class="op">+</span><span class="st"> </span>coef <span class="op">*</span><span class="st"> </span>x,</a>
<a class="sourceLine" id="cb8-47" data-line-number="47">          <span class="dt">yend =</span> intercept <span class="op">+</span><span class="st"> </span>coef <span class="op">*</span><span class="st"> </span>xend</a>
<a class="sourceLine" id="cb8-48" data-line-number="48">      )</a>
<a class="sourceLine" id="cb8-49" data-line-number="49">})</a></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/execute.html">execute_multiverse</a></span>(M)</a></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">p.above &lt;-<span class="st"> </span><span class="kw"><a href="../reference/accessors.html">multiverse_table</a></span>(M) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">data =</span> <span class="kw">map</span>(.results, <span class="st">"df.error_bar.i"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw">unnest</span>( <span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(data) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>( sign <span class="op">==</span><span class="st"> </span><span class="dv">1</span> ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_errorbar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> rbase, <span class="dt">ymin =</span> (mean <span class="op">-</span><span class="st"> </span>sd), <span class="dt">ymax =</span> mean <span class="op">+</span><span class="st"> </span>sd, <span class="dt">color =</span> approach), <span class="dt">width =</span> <span class="fl">0.025</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_point</span>( <span class="kw">aes</span>(<span class="dt">x =</span> rbase, <span class="dt">y =</span> mean, <span class="dt">color =</span> approach )) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_hline</span>( <span class="dt">yintercept =</span> <span class="fl">0.45</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>, <span class="dt">alpha =</span> <span class="fl">0.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_abline</span>( <span class="dt">slope =</span> <span class="dv">-1</span>, <span class="dt">intercept =</span> <span class="dv">1</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>, <span class="dt">alpha =</span> <span class="fl">0.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="st">  </span><span class="kw">facet_wrap</span>( <span class="op">~</span><span class="st"> </span>vis, <span class="dt">nrow =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="st">  </span><span class="kw">transition_manual</span>(.universe)</a>
<a class="sourceLine" id="cb10-12" data-line-number="12"></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="kw">animate</span>(p.above, <span class="dt">nframes =</span> n, <span class="dt">fps =</span> <span class="dv">3</span>, <span class="dt">width =</span> <span class="dv">840</span>, <span class="dt">height =</span> <span class="dv">320</span>)</a></code></pre></div>
<p><img src="dance_files/figure-html/vis-errorbars-above-1.gif"><!-- --></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">p.below &lt;-<span class="st"> </span><span class="kw"><a href="../reference/accessors.html">multiverse_table</a></span>(M) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">data =</span> <span class="kw">map</span>(.results, <span class="st">"df.error_bar.i"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw">unnest</span>( <span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(data) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>( sign <span class="op">==</span><span class="st"> </span><span class="dv">-1</span> ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_errorbar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> rbase, <span class="dt">ymin =</span> (mean <span class="op">-</span><span class="st"> </span>sd), <span class="dt">ymax =</span> mean <span class="op">+</span><span class="st"> </span>sd, <span class="dt">color =</span> approach), <span class="dt">width =</span> <span class="fl">0.025</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_point</span>( <span class="kw">aes</span>(<span class="dt">x =</span> rbase, <span class="dt">y =</span> mean, <span class="dt">color =</span> approach )) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_hline</span>( <span class="dt">yintercept =</span> <span class="fl">0.45</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>, <span class="dt">alpha =</span> <span class="fl">0.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_abline</span>( <span class="dt">slope =</span> <span class="dv">-1</span>, <span class="dt">intercept =</span> <span class="dv">1</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>, <span class="dt">alpha =</span> <span class="fl">0.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="st">  </span><span class="kw">facet_wrap</span>( <span class="op">~</span><span class="st"> </span>vis, <span class="dt">nrow =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="st">  </span><span class="kw">transition_manual</span>(.universe)</a>
<a class="sourceLine" id="cb11-12" data-line-number="12"></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="kw">animate</span>(p.below, <span class="dt">nframes =</span> n, <span class="dt">fps =</span> <span class="dv">3</span>, <span class="dt">width =</span> <span class="dv">840</span>, <span class="dt">height =</span> <span class="dv">320</span>)</a></code></pre></div>
<p><img src="dance_files/figure-html/vis-errorbars-below-1.gif"><!-- --></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">p.fitted_lines &lt;-<span class="st"> </span><span class="kw"><a href="../reference/accessors.html">multiverse_table</a></span>(M) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">data =</span> <span class="kw">map</span>(.results, <span class="st">"df.corr_fitted.i"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span><span class="kw">unnest</span>( <span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(data) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_segment</span>( <span class="kw">aes</span>( <span class="dt">x=</span>x, <span class="dt">y=</span>y, <span class="dt">xend=</span>xend, <span class="dt">yend=</span>yend, <span class="dt">color =</span> vis, <span class="dt">linetype =</span> sign) ) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st">  </span><span class="kw">coord_cartesian</span>( <span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="fl">0.6</span>) ) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="st">  </span><span class="kw">scale_y_continuous</span>( <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">by =</span> <span class="fl">0.1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="st">  </span><span class="kw">scale_x_continuous</span>( <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">by =</span> <span class="fl">0.2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="st">  </span><span class="kw">transition_manual</span>(.universe)</a>
<a class="sourceLine" id="cb12-10" data-line-number="10"></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="kw">animate</span>(p.fitted_lines, <span class="dt">nframes =</span> n, <span class="dt">fps =</span> <span class="dv">3</span>, <span class="dt">width =</span> <span class="dv">840</span>, <span class="dt">height =</span> <span class="dv">480</span>)</a></code></pre></div>
<p><img src="dance_files/figure-html/vis-regression-lines-1.gif"><!-- --></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#the-data">The data</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Abhraneel Sarma, Matthew Kay.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
